(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{445:function(e,t,n){},450:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(65),n(66),n(96),n(149),n(11),n(35),n(44);var i=n(68);function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(i.a)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var s=0,c=function(){};return{s:c,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){d=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(d)throw a}}}}},477:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAI5JREFUOE9jZKAQMFKonwHFgANHTns62Jhux2couhq4ASAJBgbGbQz/GcIcbE1WYzPkwOEzoQyMDKsYGP57wSxCdQFMARZD4JrR5DDCAJtCXJpBrsQaiMgawF4BORuH13DGAsK/DAz4woU2BlDkBYoCEV9oE4xGfJphiQqbGoyEhCsVIhuCrIa6mYmcnAkAV810EZmJGs8AAAAASUVORK5CYII="},478:function(e,t,n){"use strict";var i=n(445);n.n(i).a},498:function(e,t,n){"use strict";n.r(t);n(34),n(241),n(95),n(97),n(242),n(146);var i=n(63),s=n(450),c={name:"yyLevelModel",props:{title:{type:String,default:"企业模型"},data:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},isSingleCheck:{type:Boolean,default:!1},checkedIds:{type:Array,default:function(){return[]}},disabledIds:{type:Array,default:function(){return[]}},visibleNodeTypes:{type:Array,default:function(){return[2,3,4,5]}},isNeedCheckAll:{type:Boolean,default:!0}},data:function(){return{enterpriseName:"",selectName:"",renderTreeList:[],checkedNodes:[],expandedKeys:[],checkedKeys:[],defaultProps:{children:"children",label:"name",disabled:"disabled"}}},watch:{visible:{handler:function(){var e=this;this.visible&&(this.checkedKeys=this.checkedIds,this.checkedNodes=this.data.filter((function(t){return e.checkedIds.includes(t.id)})),this.spliceLevelModel())},immediate:!0}},methods:{spliceLevelModel:function(){var e=this,t=this.data.map((function(t){return{id:t.id,name:t.name,parentId:t.parentId,type:t.type,disabled:e.disabledIds.includes(t.id),children:[]}})),n=t.filter((function(e){return!e.parentId}))[0];this.enterpriseName=n.name;var i,c=t.filter((function(t){return e.visibleNodeTypes.includes(t.type)})),a=[],r=Object(s.a)(c);try{for(r.s();!(i=r.n()).done;){var d=i.value;this.expandedKeys.push(d.id),a.push(d);var l,o=Object(s.a)(c);try{for(o.s();!(l=o.n()).done;){var u=l.value;u.parentId===d.id&&(u.isDelete=!0,d.children.push(u))}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}a=a.filter((function(e){return!e.isDelete})),this.expandedKeys=a.map((function(e){return e.id})),this.renderTreeList=a},search:function(){this.$refs.tree.filter(this.selectName)},filterNode:function(e,t){return!e||t.name.includes(e)},checkNode:function(e,t){var n=this;return Object(i.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n.isSingleCheck){i.next=14;break}if(n.$refs.tree.getNode(e.id).checked){i.next=7;break}n.checkedKeys=[],n.checkedNodes=[],i.next=12;break;case 7:return n.checkedKeys=[e.id],n.checkedNodes=[e],i.next=11,n.$nextTick();case 11:n.$refs.tree.setCheckedKeys([e.id]);case 12:i.next=16;break;case 14:n.checkedKeys=t.checkedKeys,n.checkedNodes=t.checkedNodes;case 16:case"end":return i.stop()}}),i)})))()},setCheckedAll:function(){var e=this;this.checkedKeys=this.data.filter((function(t){return t.parentId&&!e.disabledIds.includes(t.id)})).map((function(e){return e.id})),this.checkedNodes=JSON.parse(JSON.stringify(this.data)).filter((function(t){return t.parentId&&!e.disabledIds.includes(t.id)}))},delChecked:function(e){this.checkedNodes=this.checkedNodes.filter((function(t){return t.id!==e.id})),this.checkedKeys=this.checkedKeys.filter((function(t){return t!==e.id})),this.$refs.tree.setCheckedKeys(this.checkedKeys)},close:function(){this.$emit("close")},confirm:function(){this.$emit("confirm",this.checkedNodes)}}},a=(n(478),n(62)),r=Object(a.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.visible?i("div",{staticClass:"levelModel-mask"},[i("div",{staticClass:"levelModel-container"},[i("div",{staticClass:"container-head"},[i("p",{staticClass:"head-title"},[e._v(e._s(e.title))]),e._v(" "),i("img",{staticClass:"icon-close",attrs:{src:n(477)},on:{click:e.close}})]),e._v(" "),i("div",{staticClass:"container-main"},[i("div",{staticClass:"main-left"},[i("div",{staticClass:"search-container"},[i("el-input",{attrs:{size:"medium",placeholder:"请输入关键词","prefix-icon":"el-icon-search",maxlength:"20"},on:{input:e.search},model:{value:e.selectName,callback:function(t){e.selectName=t},expression:"selectName"}})],1),e._v(" "),i("div",{staticClass:"tree-container"},[i("div",{staticClass:"levelModel-enterprise"},[i("p",{staticClass:"enterprise-name"},[e._v(e._s(e.enterpriseName))]),e._v(" "),!e.isSingleCheck&&e.isNeedCheckAll?i("p",{staticClass:"btn-selectAll",on:{click:e.setCheckedAll}},[e._v("\n              全选\n            ")]):e._e()]),e._v(" "),i("el-tree",{ref:"tree",class:[e.isSingleCheck?"tree-singleCheck":"tree-multipleCheck"],attrs:{data:e.renderTreeList,"node-key":"id","show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-expanded-keys":e.expandedKeys,"default-checked-keys":e.checkedKeys,props:e.defaultProps,"filter-node-method":e.filterNode},on:{check:e.checkNode},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,s=t.data;return i("div",{staticClass:"tree-node-custom"},[i("div",{staticClass:"levelModel-node"},[i("div",{staticClass:"levelModel-node-left"},[i("div",{class:["icon",e.checkedKeys.includes(s.id)?"level"+s.type+"-active":"level"+s.type]}),e._v(" "),i("p",{class:[e.checkedKeys.includes(s.id)?"name-active":"name"]},[e._v("\n                    "+e._s(n.label)+"\n                  ")])])])])}}],null,!1,4257770606)})],1)]),e._v(" "),i("div",{staticClass:"main-right"},[i("div",{staticClass:"checked-tip"},[e._v("已选："+e._s(e.checkedNodes.length)+"个")]),e._v(" "),i("div",{staticClass:"checked-container"},e._l(e.checkedNodes,(function(t){return i("div",{key:t.id,staticClass:"checked-option"},[i("div",{staticClass:"checked-label"},[i("div",{class:["icon","level"+t.type+"-active"]}),e._v(" "),i("p",{staticClass:"name"},[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticClass:"btn-del",on:{click:function(n){return e.delChecked(t)}}},[e._v("移除")])])})),0)])]),e._v(" "),i("div",{staticClass:"container-foot"},[i("button",{staticClass:"cancel",on:{click:e.close}},[e._v("取消")]),e._v(" "),i("button",{staticClass:"confirm",on:{click:e.confirm}},[e._v("确定")])])])]):e._e()}),[],!1,null,"e10510f2",null);t.default=r.exports}}]);